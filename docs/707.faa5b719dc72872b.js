"use strict";(self.webpackChunkHaulSight=self.webpackChunkHaulSight||[]).push([[707],{5707:(I,n,o)=>{o.r(n),o.d(n,{SEARCH_ROUTES:()=>p});var a=o(6396),l=o(2306),e=o(7241),h=o(6518),d=o(2261);function m(s,u){if(1&s&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Carrier Info"),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Name:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"USDOT Number:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Status Code:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Address:"),e.k0s(),e.EFF(18),e.k0s()()),2&s){const r=e.XpG();e.R7$(6),e.SpI(" ",r.filteredItem.legalName),e.R7$(4),e.SpI(" ",r.filteredItem.dotNumber),e.R7$(4),e.SpI(" ",r.filteredItem.statusCode),e.R7$(4),e.LHq(" ",r.filteredItem.phyStreet,", ",r.filteredItem.phyCity,", ",r.filteredItem.phyState," ",r.filteredItem.phyZipcode," ")}}function f(s,u){if(1&s&&(e.j41(0,"div")(1,"p"),e.EFF(2),e.k0s()()),2&s){const r=e.XpG();e.R7$(2),e.SpI("Searching for ",r.searchTerm,"\u{1f50d}")}}const p=[{path:"",component:(()=>{class s{route;http;router;toolBarService;searchTerm="";items=[];filteredItem=null;webKey="ce8453b4abbdd6b60e7b2f16481dc42000194f81";constructor(r,t,i,c){this.route=r,this.http=t,this.router=i,this.toolBarService=c}ngOnInit(){this.toolBarService.setSearching(!0),this.route.queryParams.subscribe(r=>{const t=r.type||"",i=r.q||"";this.searchTerm=i||"Nothing",this.searchItems(t,i)})}searchItems(r,t){if(t||r)if(t)switch(r){case"name":this.callNameApi(t);break;case"usdot":this.callUSDOTApi(t);break;case"docket":this.callDocketApi(t);break;default:this.filteredItem=null}else this.filteredItem=null;else this.router.navigateByUrl("")}callNameApi(r){this.http.get(`https://mobile.fmcsa.dot.gov/qc/services/carriers/name/${encodeURIComponent(r)}?webKey=${encodeURIComponent(this.webKey)}`).subscribe(t=>{const i=t.content?.filter(c=>"Y"===c.carrier.allowedToOperate)||[];this.filteredItem=i.map(c=>c.carrier),this.filteredItem=this.filteredItem[0],this.toolBarService.setSearching(!1)},t=>{console.error("Error fetching by name:",t)})}callUSDOTApi(r){this.http.get(`https://mobile.fmcsa.dot.gov/qc/services/carriers/${encodeURIComponent(r)}?webKey=${encodeURIComponent(this.webKey)}`).subscribe(t=>{this.filteredItem=t.content.carrier,this.toolBarService.setSearching(!1)},t=>{console.error("Error fetching by USDOT:",t)})}callDocketApi(r){this.http.get(`https://mobile.fmcsa.dot.gov/qc/services/carriers/docket-number/${encodeURIComponent(r)}?webKey=${encodeURIComponent(this.webKey)}`).subscribe(t=>{console.log(t),this.filteredItem=t.content[0].carrier,this.toolBarService.setSearching(!1)},t=>{console.error("Error fetching by USDOT:",t)})}static \u0275fac=function(t){return new(t||s)(e.rXU(h.nX),e.rXU(l.Qq),e.rXU(h.Ix),e.rXU(d.d))};static \u0275cmp=e.VBU({type:s,selectors:[["app-search"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(t,i){1&t&&e.DNE(0,m,19,7,"div",0)(1,f,3,1,"div",0),2&t&&(e.Y8G("ngIf",i.filteredItem),e.R7$(),e.Y8G("ngIf",!i.filteredItem))},dependencies:[l.q1,a.MD,a.bT],styles:["*[_ngcontent-%COMP%]{color:#fff}"]})}return s})()}]}}]);